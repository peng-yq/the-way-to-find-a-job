[N皇后问题-Hello-Algo](https://www.hello-algo.com/chapter_backtracking/n_queens_problem/)

## N皇后问题

根据国际象棋的规则，皇后可以攻击与之处在同一行或同一列或同一斜线上的棋子。给定n个皇后和一个n*n大小的棋盘，寻找使得所有皇后之间无法相互攻击的摆放方案。

从回溯算法来看，state为当前棋盘皇后的排列状态，choices为n*n个格子，res则是最后符合题目条件的n个皇后的排列状态。

<img src="https://www.hello-algo.com/chapter_backtracking/n_queens_problem.assets/n_queens_constraints.png">

## 剪枝

由于皇后可以攻击与之处在同一行、同一列或同一斜线的棋子，因此在进行选择时需要对其进行剪枝：

- 由于皇后不能处于同一列，并且棋盘大小为n*n，也就是说每一行最多一个皇后，最多进行n轮选择
- 不能处于同一列的限定条件也很好解决，只需要一个数组大小为n的bool数组用于记录每列是否已放置皇后；在进行每轮选择时首先通过这个数组进行判断这一列是否已放置皇后，若放置则直接进行剪枝

不能处于同一斜线的限定条件相对棘手一些，如下图所示斜线可分为两种：

- 第一种斜线上的棋子横坐标-纵坐标的值一致,横坐标-纵坐标的值的范围为[1-n, n-1]，共2n-1个元素，使用一个数组大小为2n-1的bool数组进行记录，需要注意的是由于有负值，因此在计算的时候需要加上n-1与数组索引相对应
- 第二种斜线上的棋子横坐标+纵坐标的值一致,横坐标+纵坐标的值的范围为[0, 2n-2]，共2n-1个元素，直接使用一个数组大小为2n-1的bool数组进行记录

上述bool数组也可以使用同样大小的哈希表进行记录。

<img src="https://cdn.jsdelivr.net/gh/peng-yq/Gallery/img/202311081657545.jpg">

## 算法特性

- 时间复杂度为$O(n!)$
- 空间复杂度为$O(n^2)$

