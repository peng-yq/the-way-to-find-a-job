#### MySQL中的四种索引类型

1. B-Tree：也就是B+树，是MySQL里默认和最常用的索引类型，分为内部节点和叶子节点，内部节点只存储键，从而减小树的高度，减少磁盘I/O操作；叶子节点存储值，叶子节点通过链表链接，可以通过链表顺序访问范围内的所有顺序。B树只能中序遍历所有节点，效率低。
2. HASH：基于哈希表实现，查询速度非常快，但不支持范围查找，只适合单条数据查询。
3. FULLTEXT：全文索引对文本内容进行索引，支持包含某个词语的查询，而不是B-TREE那样基于整个列的比较。适用于CHAR、VARCHAR或TEXT类型的列。
4. R-TREE：空间索引，用的比较少，专门用于处理地理空间数据

#### 视图的作用，可以更改吗

1. 虚拟表，使用和物理表一样
2. 是一个或多个表的列的子集
3. 本身不包含数据，数据仍然存储在基础表中

作用：

1. 安全性：限制用户访问特定数据
2. 简化复杂的SQL操作
3. 隐藏具体的细节

视图主要用于简化检索，保护数据，一般不对视图进行更新；修改视图的定义

```sql	
CREATE VIEW IT_Department AS
SELECT EmployeeID, Name, Salary
FROM Employees
WHERE Department = 'IT';
```

#### 选择MySQL作为数据库存储数据，一天五万条以上的增量，预计运维三年，怎么优化

1. 设计良好的数据库结构，避免join查询，提高效率
2. 选择合适的表字段数据类型，适当添加索引
3. 对表进行划分，垂直分表，水平分表
4. 增加缓存机制
5. 书写高效率的SQL，比如减少使用SELECT*

#### 什么时候需要建立数据库索引

索引主要用于提高查询性能：

1. 频繁查询的列：经常使用where语句、join语句的列
2. 经常需要排序和分组的列
3. 唯一性验证：在需要保证值唯一性的列上创建唯一索引，可以在插入或修改数据时自动检查重复值
4. 外键：作为外键的列上创建索引可以加速联表查询的速度
5. 一些特殊数据类型比如文本字段不宜建立索引

#### 覆盖索引

查询的所有列都包含在索引中，就叫覆盖索引，可以直接从索引本身返回需要的数据，无需访问数据表中的数据行，性能很好。

#### 主键、超键、候选键、外键

1. 主键：能唯一标识一行记录的列或列的组合，主键不能为空，一个表只能有一个主键
2. 超键：能够唯一标识一行记录的列或列的组合，主键也是超键，主键和其它可以唯一标识一行记录的列也可以成为超键
3. 候选键：超键的子集，没有多余的属性，也就是从候选键中移除任何属性，它将不是超键，候选键可以作为主键
4. 外键：一个表中的列是另一个表的主键，用于建立和维护两个表中的关系

1. **班级表（Classes）**
   - ClassID (班级编号，主键)
   - ClassName (班级名称)
2. **学生表（Students）**
   - StudentID (学生编号，主键)
   - StudentName (学生姓名)
   - ClassID (班级编号，外键)
   - Email (学生邮箱)：

1. **主键（Primary Key）**
   - **班级表**中的`ClassID`是主键，因为它可以唯一标识表中的每一行。
   - **学生表**中的`StudentID`是主键，同样用于唯一标识表中的每一行。
2. **超键（Super Key）**
   - **班级表**中的任何包含`ClassID`的列集合都是超键，例如{ClassID}，{ClassID, ClassName}。
   - **学生表**中的超键包括{StudentID}，{StudentID, StudentName}，{StudentID, ClassID}，{StudentID, Email}，等等，因为这些组合都能唯一标识表中的记录。
3. **候选键（Candidate Key）**
   - **班级表**中的候选键只有`ClassID`，因为它是最小的超键。
   - **学生表**中的候选键为`StudentID`和`Email`（假设每个学生的邮箱也是唯一的）。这两个都是最小的超键，即移除任何属性都将无法保持唯一性。
4. **外键（Foreign Key）**
   - **学生表**中的`ClassID`是外键，它引用了**班级表**的`ClassID`。这样的设计用于表明每个学生属于哪个班级，建立两个表之间的关联。

#### 数据库三大范式

第一范式：

1. 对关系模型的基本要求，不满足第一范式的数据库就不是关系数据库。
2. **每一列都不可再分，无重复的列**
3. 原子性

第二范式：

1. 满足第二范式必须先满足第一范式
2. **要求每一行都能被唯一标识，也就是需要有主键，并且非主键部分依赖于主键**
3. 唯一性

第三范式：

1. 满足第三范式必须先满足第二范式
2. **要求一个数据库表中不包含已在其它表中已包含的非主关键字信息**
3. 比如班级表中班级编号是主键，还有班级名称列；那么学生表中就只能出现班级编号，不能有班级名称
4. 避免数据冗余

#### 事务的四大特性：A（原子性）C（一致性）I（隔离性）D（持久性）

1. 原子性：事务要么全部成功，要么全部回滚
2. 一致性：事务的执行结果必须从一个正确状态转换到另一个正确状态，事务在执行过程中，即使发生错误或者系统故障，最终数据库的数据和状态必须保持正确和合法
3. 隔离性：多个用户并发访问数据库时，不能被其它事务所干扰，多个并发事务需要相互隔离
4. 持久性：事务一旦被提交了，对数据库中的数据的改变就是永久性的

#### sql中的NOW()和CURRENT_DATE()两个函数

1. NOW()：显示年、月、日、小时、分、秒
2. CURRENT_DATE()：年、月、日

#### 聚集索引、非聚集索引及其区别

通过聚集索引可以直接查到所需要的数据

通过非聚集索引可以查到记录对应的主键值，再使用主键的值查找到需要的数据

聚集索引直接按索引顺序存储数据行，而非聚集索引则是存储键和指向数据行的指针。

InnoDB 使用聚集索引来组织数据。

MyISAM 使用非聚集索引。

#### MySQL中CHAR和VARCHAR

char长度不可变，用空格填充到指定长度大小，存取速度快，对英文字符（ASCII）占用1个字节，对汉字占用2个字节

varchar长度可变，对英文字符和汉字都占用2个字节

#### 使用索引的注意事项

1. 不要在列上使用函数或运算，这会让索引失效，并进行全表扫描

```sql
# 使用函数
select * from news where year(publish_time) < 2017
select * from news where publish_time < '2017-01-01'
# 使用运算
select * from news where id / 100 = 1
select * from news where id = 1 * 100
```

2. 避免在where子句使用!=或not in或<>等否定操作符，使用or，这会让索引失效，并进行全表扫描
3. 使用覆盖索引
4. 使用组合索引代替多个单列索引

#### mysql中有哪些索引

1. 普通索引：仅加速查询
2. 唯一索引：加速查询+列值唯一（可以为null）
3. 主键索引：加速查询+列值唯一+全表只有1个+不可为空
4. 组合索引：多列值组合成一个索引
5. 全文索引：对文本内容进行分词进行搜索
6. 覆盖索引：查询的列都是索引，可以直接从索引中获得数据，不用去访问数据表

#### 为什么不对表中每一列创建一个索引

创建索引和维护索引需要空间和时间，数据量增大会消耗很多性能

